<!doctype html>
<html>
<head>
  <title>NPS | GUI</title>

  <link type="text/css" href="BrowserGUI.css" rel="Stylesheet">
  <script type="text/javascript" src="js/vis/vis.min.js"></script>
  <script type="text/javascript" src="js/lodash/lodash.js"></script>
  <script type="text/javascript" src="js/zerorpc/zerorpc.js"></script>
  <link type="text/css" rel="stylesheet" href="js/vis/vis.min.css">

  <script type="text/javascript" src="BrowserGUI.js"></script>
  <script type="text/javascript" src="WebSocketClient.js"></script>

  <script type="text/javascript">

   function send_input_json() {
       var json_data = export_json(nodes, edges);
       var input_flag_str = "msg::input_json::";
       send_data(input_flag_str + json_data);
   }

   function simulate() {
//       connect();
//       setTimeout(1000);
       send_input_json();
       send_data("msg::simulate::");
   }
  </script>

</head>

<body onload="draw();">

<button onclick="connect()">Connect to NPS</button>
<!--<button onclick="send_input_json()">Send input JSON</button>-->
<button onclick="simulate()">Simulate</button>
<button onclick="show_json()">Show json</button>
<span id="debug">I want the result here</span>


<table>
  <tr>
    <td>
      <form onsubmit="draw(); return false;">
        <label for="nodeCount">Number of nodes:</label>
        <input id="nodeCount" type="text" value="77" style="width: 50px;">
        <!--<label for="clustering">Enable Clustering:</label>-->
        <!--<input id="clustering" type="checkbox" onChange="draw()" checked="true">-->
        <!--<label for="clusterEdgeThreshold">clusterEdgeThreshold:</label>-->
        <!--<input id="clusterEdgeThreshold" type="text" value="20" style="width: 50px;">-->
        <input type="submit" value="Generate">
      </form>
    </td>
    <td>
      <label><input type='checkbox' onclick='changeLayout(this);'>Layout</label>
    </td>
    <td>
      <input type="hidden" id="layoutOn" value=false>
    </td>
  </tr>
</table>

<table>
  <tr>
    <td>
      <h2>Node</h2>
      <table>
        <tr>
          <td></td>
          <td><label for="custom-node-id">Id</label></td>
          <td><input id="custom-node-id" type="text" value="6"></td>
        </tr>
        <tr>
          <td></td>
          <td><label for="custom-node-label">Label</label></td>
          <td><input id="custom-node-label" type="text" value="Node 6"></td>
        </tr>
        <tr>
          <td></td>
          <td>Action</td>
          <td>
            <button id="custom-node-add">Add</button>
            <button id="custom-node-update">Update</button>
            <button id="custom-node-remove">Remove</button>
          </td>
        </tr>
      </table>
    </td>
    <td>
      <h2>Edge</h2>
      <table>
        <tr>
          <td></td>
          <td><label for="custom-edge-id">Id</label></td>
          <td><input id="custom-edge-id" type="text" value="5"></td>
        </tr>
        <tr>
          <td></td>
          <td><label for="custom-edge-from">From</label></td>
          <td><input id="custom-edge-from" type="text" value="3"></td>
        </tr>
        <tr>
          <td></td>
          <td><label for="custom-edge-to">To</label></td>
          <td><input id="custom-edge-to" type="text" value="4"></td>
        </tr>
        <tr>
          <td></td>
          <td>Action</td>
          <td>
            <button id="custom-edge-add">Add</button>
            <button id="custom-edge-update">Update</button>
            <button id="custom-edge-remove">Remove</button>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>

<div id="network-popUp">
  <span id="operation">node</span> <br>
  <table style="margin:auto;"><tr>
    <td>id</td><td><input id="node-id" value="new value"></td>
  </tr>
    <tr>
      <td>label</td><td><input id="node-label" value="new value"> </td>
    </tr>
    <tr>
      <td>services</td><td><input id="node-services" value=""> </td>
    </tr>
  </table>
  <input type="button" value="save" id="saveButton"></button>
  <input type="button" value="cancel" id="cancelButton"></button>
</div>
<br />

<table width="100%" cellpadding="5">
   <tr>
    <td valign="top" width="75%" bgcolor="#f0f0f0">
        <div id="mynetwork"></div>
    </td>
    <td valign="top" width="25%" bgcolor="#ffcc00">
        <p>Status: <span id="readyState">-</span> <span id="status">Idle</span></p>
        <p>Buffer: <span id="bufferedAmount">-</span> bytes</p>
        <p>
           <label>WebSocket URL: <input id="url" type="url" size="80" value="ws://127.0.0.1:9876"></label>
           <label hidden="true">Protocol: <input id="protocol" type="text" size="10" value="" hidden="true"></label>
           <input type=button value="Connect" onclick="connect()">
           <input type=button value="Disconnect" onclick="disconnect()">
        </p>
        <input type=button value="Simulate" onclick="simulate()">
        <textarea id="ConsoleOutputArea" rows="27" readonly></textarea>

        <p>
           <textarea id="text" type="text" rows="1" ></textarea>
           <input type=button value="Send" onclick="send()">
        </p>
        <!--<p>-->
           <!--&lt;!&ndash;<input type=button value="Spam 100 packets" onclick="send100()">&ndash;&gt;-->
        <!--</p>-->
        <!--<pre id="log">Log:</pre>-->
    </td>
   </tr>
</table>





<p id="selection"></p>
</body>
</html>